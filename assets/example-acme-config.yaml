# ACME DNS-01 Challenge Configuration Example
# This file demonstrates how to configure automatic TLS certificate management
# using DNS-01 challenges with Let's Encrypt or other ACME-compatible CAs.

acme:
  # Mode switching: "letsencrypt" or "zerossl"
  # - letsencrypt: uses Let's Encrypt (no EAB required)
  # - zerossl: uses ZeroSSL (EAB required, see eab section below)
  # The server URL is automatically set based on mode.
  # You can override it with an explicit "server" field.
  mode: "letsencrypt"

  # ACME server URL (optional, auto-resolved from mode if omitted)
  # Let's Encrypt Production: https://acme-v02.api.letsencrypt.org/directory
  # Let's Encrypt Staging:    https://acme-staging-v02.api.letsencrypt.org/directory
  # ZeroSSL Production:       https://acme.zerossl.com/v2/DV90
  # server: "https://acme-staging-v02.api.letsencrypt.org/directory"

  # Email address for ACME account registration
  # Used for important notifications (e.g., certificate expiration warnings)
  email: "admin@example.com"

  # External Account Binding (EAB) configuration
  # Required for ZeroSSL; ignored for Let's Encrypt.
  # Values are resolved at runtime from the named environment variables.
  # eab:
  #   kid_env: "ACME_EAB_KID"
  #   hmac_env: "ACME_EAB_HMAC"

  # Certificate key type
  # Options: RSA2048, RSA4096, EC256, EC384
  # EC256 is recommended for better performance and smaller certificates
  key_type: "RSA2048"

  # DNS propagation wait time
  # How long to wait after creating DNS TXT record before ACME validation
  # Increase if your DNS provider has slow propagation
  propagation_wait: "60s"

  # Automatic renewal configuration
  auto_renew:
    # Enable automatic certificate renewal
    enabled: true

    # How often to check for certificates needing renewal
    check_interval: "24h"

    # Renew certificates this long before expiration
    # 720h = 30 days (recommended)
    renew_before: "720h"

  # Certificate storage configuration
  storage:
    # Storage backend type
    # Options: kubernetes-secret, file
    type: "kubernetes-secret"

    # Kubernetes namespace (if type is kubernetes-secret)
    namespace: "default"

    # File system path (if type is file)
    # path: "/var/lib/jw238dns/certs"

# ---
# ZeroSSL example (uncomment to use):
#
# acme:
#   mode: "zerossl"
#   email: "admin@example.com"
#   eab:
#     kid_env: "ACME_EAB_KID"
#     hmac_env: "ACME_EAB_HMAC"
#   auto_renew:
#     enabled: true
#     check_interval: "24h"
#     renew_before: "720h"
#   storage:
#     type: "kubernetes-secret"
#     namespace: "default"

# Example domains to obtain certificates for
domains:
  # Single domain certificate
  - domains:
      - "example.com"
    auto_obtain: true

  # Wildcard certificate (requires DNS-01 challenge)
  - domains:
      - "*.example.com"
      - "example.com"
    auto_obtain: true

  # Multi-domain (SAN) certificate
  - domains:
      - "www.example.com"
      - "api.example.com"
      - "mail.example.com"
    auto_obtain: false  # Manual trigger required
